# 生物数据管理系统 - 服务端接口文档

## 1. 提供方
**系统名称**: 生物数据管理系统  
**提供方**: com.example.bio_data  
**系统版本**: 1.0.0  
**服务端口**: 8080  
**基础路径**: http://localhost:8080

---

## 2. 认证授权模块 (AuthController)

### 2.1 用户登录
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/auth/login/user`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| username | 用户名 | String | 是 | 长度不超过50字符 |
| password | 密码 | String | 是 | 长度不超过100字符 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| userId | 用户ID | Long | 否 | 登录成功时返回 |
| userType | 用户类型 | String | 否 | 固定值"user" |
| permission | 用户权限 | String | 否 | 用户权限等级 |

**返回格式**: JSON  
**返回内容**:
```
json
{
    "success": true,
    "message": "登录成功",
    "userId": 123,
    "userType": "user",
    "permission": "user"
}
```

**示例1** (登录成功):
```json
{
    "success": true,
    "message": "登录成功",
    "userId": 123,
    "userType": "user",
    "permission": "user"
}
```

**示例2** (登录失败):
```json
{
    "success": false,
    "message": "用户名或密码错误"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.2 管理员登录
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/auth/login/admin`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| username | 管理员用户名 | String | 是 | 长度不超过50字符 |
| password | 密码 | String | 是 | 长度不超过100字符 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| userId | 管理员ID | Long | 否 | 登录成功时返回 |
| userType | 用户类型 | String | 否 | 固定值"admin" |
| permission | 管理员权限 | String | 否 | 管理员权限等级 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "管理员登录成功",
    "userId": 1,
    "userType": "admin",
    "permission": "admin"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "管理员登录成功",
    "userId": 1,
    "userType": "admin",
    "permission": "admin"
}
```

**示例2**:
```json
{
    "success": false,
    "message": "管理员用户名或密码错误"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.3 用户注册
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/auth/register/user`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| username | 用户名 | String | 是 | 长度不超过50字符，需唯一 |
| password | 密码 | String | 是 | 长度不超过100字符 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| userId | 用户ID | Long | 否 | 注册成功时返回 |
| permission | 用户权限 | String | 否 | 固定值"user" |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "用户注册成功",
    "userId": 123,
    "permission": "user"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "用户注册成功",
    "userId": 123,
    "permission": "user"
}
```

**示例2**:
```json
{
    "success": false,
    "message": "用户名已存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.4 检查用户是否存在
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/auth/check-user`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| username | 用户名 | String | 是 | 要检查的用户名 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| exists | 用户是否存在 | Boolean | 是 | true表示存在，false表示不存在 |
| message | 响应消息 | String | 是 | 操作结果描述 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "exists": true,
    "message": "用户存在"
}
```

**示例1**:
```json
{
    "success": true,
    "exists": true,
    "message": "用户存在"
}
```

**示例2**:
```json
{
    "success": true,
    "exists": false,
    "message": "用户不存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.5 重置密码
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/auth/reset-password`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| username | 用户名 | String | 是 | 要重置密码的用户名 |
| newPassword | 新密码 | String | 是 | 新密码内容 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "密码重置成功"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "密码重置成功"
}
```

**示例2**:
```json
{
    "success": false,
    "message": "用户不存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.6 测试数据库连接
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/auth/test-connection`
- **返回值**: JSON格式响应

#### 请求参数
无

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| connected | 连接状态 | Boolean | 是 | true表示连接成功 |
| message | 连接状态描述 | String | 是 | 连接结果说明 |
| database | 数据库名称 | String | 是 | 固定值"login" |



**返回格式**: JSON
**返回内容**:
```json
{
    "connected": true,
    "message": "Login数据库连接正常",
    "database": "login"
}
```

**示例1**:
```json
{
    "connected": true,
    "message": "Login数据库连接正常",
    "database": "login"
}
```

**示例2**:
```json
{
    "connected": false,
    "message": "Login数据库连接失败",
    "database": "login"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 2.7 获取用户权限信息
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/auth/permission`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| userId | 用户ID | Long | 是 | 用户或管理员的ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| permissions | 权限列表 | Array | 否 | 用户的权限信息 |
| error | 错误信息 | String | 否 | 操作失败时返回 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "permissions": [
        "read",
        "write"
    ],
    "error": null
}
```

**示例1**:
```json
{
    "success": true,
    "permissions": [
        "read",
        "write"
    ],
    "error": null
}
```

**示例2**:
```json
{
    "success": false,
    "error": "获取用户权限信息失败"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

## 3. 数据库管理模块 (DatabaseController)

### 3.1 获取所有表信息
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/tables`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| dataSource | 数据源名称 | String | 否 | 指定数据源，默认为default |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| TABLE_NAME | 表名 | String | 是 | 数据表名称 |
| TABLE_COMMENT | 表注释 | String | 否 | 表的描述信息 |
| TABLE_ROWS | 表行数 | Long | 否 | 表中的数据行数 |
| DATA_LENGTH | 数据长度 | Long | 否 | 表数据占用空间 |
| CREATE_TIME | 创建时间 | Timestamp | 否 | 表创建时间 |



**返回格式**: JSON Array
**返回内容**:
```json
[
    {
        "TABLE_NAME": "users",
        "TABLE_COMMENT": "用户表",
        "TABLE_ROWS": 1000,
        "DATA_LENGTH": 65536,
        "CREATE_TIME": "2024-01-01 10:00:00"
    }
]
```

**示例1**:
```json
[
    {
        "TABLE_NAME": "users",
        "TABLE_COMMENT": "用户表",
        "TABLE_ROWS": 1000,
        "DATA_LENGTH": 65536,
        "CREATE_TIME": "2024-01-01 10:00:00"
    },
    {
        "TABLE_NAME": "orders",
        "TABLE_COMMENT": "订单表",
        "TABLE_ROWS": 5000,
        "DATA_LENGTH": 131072,
        "CREATE_TIME": "2024-01-02 14:30:00"
    }
]
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.2 获取指定表的列信息
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/tables/{tableName}/columns`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| COLUMN_NAME | 列名 | String | 是 | 字段名称 |
| DATA_TYPE | 数据类型 | String | 是 | 字段数据类型 |
| IS_NULLABLE | 是否可为空 | String | 是 | "YES"或"NO" |
| COLUMN_DEFAULT | 默认值 | String | 否 | 字段默认值 |
| COLUMN_COMMENT | 列注释 | String | 否 | 字段描述 |
| EXTRA | 额外信息 | String | 否 | 如auto_increment等 |



**返回格式**: JSON Array
**返回内容**:
```json
[
    {
        "COLUMN_NAME": "id",
        "DATA_TYPE": "int",
        "IS_NULLABLE": "NO",
        "COLUMN_DEFAULT": null,
        "COLUMN_COMMENT": "主键ID",
        "EXTRA": "auto_increment"
    }
]
```

**示例1**:
```json
[
    {
        "COLUMN_NAME": "id",
        "DATA_TYPE": "int",
        "IS_NULLABLE": "NO",
        "COLUMN_DEFAULT": null,
        "COLUMN_COMMENT": "主键ID",
        "EXTRA": "auto_increment"
    },
    {
        "COLUMN_NAME": "username",
        "DATA_TYPE": "varchar",
        "IS_NULLABLE": "NO",
        "COLUMN_DEFAULT": null,
        "COLUMN_COMMENT": "用户名",
        "EXTRA": ""
    }
]
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.3 获取表数据
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/tables/{tableName}/data`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| limit | 限制条数 | Integer | 否 | 默认100，最大1000 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
返回值为数组格式，每个元素包含表的一行数据，字段名为列名，字段值为对应的数据值。



**返回格式**: JSON Array
**返回内容**:
```json
[
    {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com"
    }
]
```

**示例1**:
```json
[
    {
        "id": 1,
        "username": "admin",
        "email": "admin@example.com"
    },
    {
        "id": 2,
        "username": "user1",
        "email": "user1@example.com"
    }
]
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.4 分页获取表数据
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/tables/{tableName}/data/page`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| page | 页码 | Integer | 否 | 默认1，最小为1 |
| size | 每页大小 | Integer | 否 | 默认20，最大100 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| data | 数据列表 | Array | 是 | 当前页的数据 |
| total | 总记录数 | Long | 是 | 表中总记录数 |
| page | 当前页码 | Integer | 是 | 当前页码 |
| size | 每页大小 | Integer | 是 | 每页记录数 |
| totalPages | 总页数 | Integer | 是 | 总页数 |



**返回格式**: JSON
**返回内容**:
```json
{
    "data": [
        {
            "id": 1,
            "username": "admin"
        }
    ],
    "total": 100,
    "page": 1,
    "size": 20,
    "totalPages": 5
}
```

**示例1**:
```json
{
    "data": [
        {
            "id": 1,
            "username": "admin",
            "email": "admin@example.com"
        },
        {
            "id": 2,
            "username": "user1",
            "email": "user1@example.com"
        }
    ],
    "total": 100,
    "page": 1,
    "size": 20,
    "totalPages": 5
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.5 按字段值搜索表（带进度）
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/search/tables-by-value-progress`
- **返回值**: Server-Sent Events 流

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| searchValue | 搜索值 | String | 是 | 要搜索的值 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |
| searchMode | 搜索模式 | String | 否 | 默认"auto"，可选"exact"、"fuzzy" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
SSE事件流，包含以下事件类型：
- **progress**: 搜索进度更新
- **result**: 搜索结果
- **complete**: 搜索完成
- **error**: 错误信息



**返回格式**: Server-Sent Events
**返回内容**:
SSE事件流，包含以下事件类型：
- **progress**: 搜索进度更新
- **result**: 搜索结果
- **complete**: 搜索完成
- **error**: 错误信息

**示例1**:
事件类型: progress
数据: {"progress": 50, "message": "搜索进度50%"}

事件类型: result
数据: {"table": "users", "matches": 10}

事件类型: complete
数据: {"total": 25, "message": "搜索完成"}

**说明**: 该返回字段由服务器返回给客户端

---

### 3.6 根据字段值获取表数据
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/search/data-by-value`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 指定表名 |
| searchValue | 搜索值 | String | 是 | 要搜索的值 |
| limit | 限制条数 | Integer | 否 | 默认10000，最大10000 |
| page | 页码 | Integer | 否 | 默认1 |
| size | 每页大小 | Integer | 否 | 默认50，最大1000 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| data | 匹配的数据 | Array | 是 | 包含搜索值的记录 |
| total | 匹配总数 | Long | 否 | 匹配记录总数（分页模式） |
| page | 当前页码 | Integer | 否 | 当前页码（分页模式） |
| size | 每页大小 | Integer | 否 | 每页记录数（分页模式） |



**返回格式**: JSON
**返回内容**:
```json
{
    "data": [
        {
            "id": 1,
            "username": "admin"
        }
    ],
    "total": 10,
    "page": 1,
    "size": 50
}
```

**示例1**:
```json
{
    "data": [
        {
            "id": 1,
            "username": "admin",
            "email": "admin@example.com"
        }
    ],
    "total": 10,
    "page": 1,
    "size": 50
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.7 插入表数据
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/database/tables/{tableName}/data`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| data | 数据对象 | Object | 是 | 要插入的数据，key为列名 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| affectedRows | 影响行数 | Integer | 是 | 插入的记录数 |
| dataSource | 数据源 | String | 是 | 使用的数据源名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "数据插入成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "数据插入成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例2**:
```json
{
    "success": false,
    "error": "主键重复：该记录的主键值已存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.8 删除表数据
- **提供方**: 服务器
- **接口请求方式**: DELETE
- **URL**: `/api/database/tables/{tableName}/data`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| whereConditions | 删除条件 | Object | 是 | 删除条件，key为列名，value为条件值 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| affectedRows | 影响行数 | Integer | 是 | 删除的记录数 |
| dataSource | 数据源 | String | 是 | 使用的数据源名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "数据删除成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "数据删除成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例2**:
```json
{
    "success": false,
    "message": "未找到符合条件的数据",
    "affectedRows": 0
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.9 更新表数据
- **提供方**: 服务器
- **接口请求方式**: PUT
- **URL**: `/api/database/tables/{tableName}/data`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| updateData | 更新数据 | Object | 是 | 要更新的数据，key为列名 |
| whereConditions | 更新条件 | Object | 是 | 更新条件，key为列名，value为条件值 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| affectedRows | 影响行数 | Integer | 是 | 更新的记录数 |
| dataSource | 数据源 | String | 是 | 使用的数据源名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "数据更新成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "数据更新成功",
    "affectedRows": 1,
    "dataSource": "default"
}
```

**示例2**:
```json
{
    "success": false,
    "message": "未找到符合条件的数据",
    "affectedRows": 0
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.10 批量插入表数据
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/database/tables/{tableName}/batch-insert`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 路径参数，指定表名 |
| dataList | 数据列表 | Array | 是 | 要批量插入的数据数组，最大10万条 |
| useTransaction | 是否使用事务 | Boolean | 否 | 默认false |
| importStrategy | 导入策略 | String | 否 | 默认"append"，可选"replace"等 |
| dataSource | 数据源名称 | String | 否 | 指定数据源 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| result | 详细结果 | Object | 是 | 包含成功数、失败数等统计信息 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "批量插入完成",
    "result": {
        "successCount": 100,
        "failCount": 0,
        "totalCount": 100
    }
}
```

**示例1**:
```json
{
    "success": true,
    "message": "批量插入完成",
    "result": {
        "successCount": 100,
        "failCount": 0,
        "totalCount": 100
    }
}
```

**示例2**:
```json
{
    "success": false,
    "error": "数据格式错误：请检查数据类型是否正确"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.11 获取数据库信息
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/info`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| database | 数据库名称 | String | 否 | 指定数据库 |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| databaseName | 数据库名称 | String | 是 | 数据库名称 |
| version | 数据库版本 | String | 否 | 数据库版本信息 |
| charset | 字符集 | String | 否 | 数据库字符集 |
| tableCount | 表数量 | Integer | 否 | 数据库中的表数量 |



**返回格式**: JSON
**返回内容**:
```json
{
    "databaseName": "test_db",
    "version": "8.0.25",
    "charset": "utf8mb4",
    "tableCount": 10
}
```

**示例1**:
```json
{
    "databaseName": "test_db",
    "version": "8.0.25",
    "charset": "utf8mb4",
    "tableCount": 10
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.12 获取可用数据库列表
- **提供方**: 服务器
- **接口请求方式**: GET
- **URL**: `/api/database/databases`
- **返回值**: JSON格式响应

#### 请求参数
无

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
返回数据库列表数组，每个元素包含：
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| name | 数据库名称 | String | 是 | 数据库名称 |
| displayName | 显示名称 | String | 否 | 友好显示名称 |
| description | 描述 | String | 否 | 数据库描述 |
| type | 数据库类型 | String | 是 | 数据库类型 |



**返回格式**: JSON Array
**返回内容**:
```json
[
    {
        "name": "test_db",
        "displayName": "测试数据库",
        "description": "用于测试的数据库",
        "type": "mysql"
    }
]
```

**示例1**:
```json
[
    {
        "name": "test_db",
        "displayName": "测试数据库",
        "description": "用于测试的数据库",
        "type": "mysql"
    },
    {
        "name": "prod_db",
        "displayName": "生产数据库",
        "description": "生产环境数据库",
        "type": "mysql"
    }
]
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.13 创建新数据库
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/database/create`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| databaseName | 数据库名称 | String | 是 | 要创建的数据库名称 |
| charset | 字符集 | String | 否 | 默认utf8 |
| collation | 排序规则 | String | 否 | 默认utf8_general_ci |
| description | 描述 | String | 否 | 数据库描述 |
| userId | 用户ID | Long | 是 | 当前用户ID（需管理员权限） |
| userType | 用户类型 | String | 是 | 必须为"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| databaseName | 数据库名称 | String | 否 | 创建成功时返回 |
| charset | 字符集 | String | 否 | 使用的字符集 |
| collation | 排序规则 | String | 否 | 使用的排序规则 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "数据库创建成功",
    "databaseName": "new_db",
    "charset": "utf8",
    "collation": "utf8_general_ci"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "数据库创建成功",
    "databaseName": "new_db",
    "charset": "utf8",
    "collation": "utf8_general_ci"
}
```

**示例2**:
```json
{
    "success": false,
    "error": "数据库已存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.14 删除数据库
- **提供方**: 服务器
- **接口请求方式**: DELETE
- **URL**: `/api/database/drop`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| databaseName | 数据库名称 | String | 是 | 要删除的数据库名称 |
| dataSource | 数据源名称 | String | 否 | 默认"login" |
| userId | 用户ID | Long | 是 | 当前用户ID（需管理员权限） |
| userType | 用户类型 | String | 是 | 必须为"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| databaseName | 数据库名称 | String | 否 | 删除的数据库名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "数据库删除成功",
    "databaseName": "old_db"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "数据库删除成功",
    "databaseName": "old_db"
}
```

**示例2**:
```json
{
    "success": false,
    "error": "数据库不存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.15 创建新表
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/database/tables/create`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 要创建的表名 |
| databaseName | 数据库名称 | String | 是 | 目标数据库名称 |
| columns | 列定义 | Array | 是 | 列定义数组 |
| tableComment | 表注释 | String | 否 | 表的描述信息 |
| dataSource | 数据源名称 | String | 否 | 默认"login" |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| tableName | 表名 | String | 否 | 创建的表名 |
| databaseName | 数据库名称 | String | 否 | 目标数据库名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "表创建成功",
    "tableName": "new_table",
    "databaseName": "test_db"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "表创建成功",
    "tableName": "new_table",
    "databaseName": "test_db"
}
```

**示例2**:
```json
{
    "success": false,
    "error": "表已存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 3.16 删除表
- **提供方**: 服务器
- **接口请求方式**: DELETE
- **URL**: `/api/database/tables/drop`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| tableName | 表名 | String | 是 | 要删除的表名 |
| databaseName | 数据库名称 | String | 是 | 目标数据库名称 |
| dataSource | 数据源名称 | String | 否 | 默认"login" |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| tableName | 表名 | String | 否 | 删除的表名 |
| databaseName | 数据库名称 | String | 否 | 目标数据库名称 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "表删除成功",
    "tableName": "old_table",
    "databaseName": "test_db"
}
```

**示例1**:
```json
{
    "success": true,
    "message": "表删除成功",
    "tableName": "old_table",
    "databaseName": "test_db"
}
```

**示例2**:
```json
{
    "success": false,
    "error": "表不存在"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

## 4. 知识图谱模块 (KnowledgeGraphController)

### 4.1 解析JSON格式知识图谱文件
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/knowledge-graph/parse/json`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| jsonContent | JSON内容 | String | 是 | 知识图谱的JSON格式内容 |
| fileName | 文件名 | String | 否 | 原始文件名 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| data | 解析结果 | Object | 否 | 解析后的知识图谱数据 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "JSON文件解析成功",
    "data": {
        "nodes": [],
        "edges": []
    }
}
```

**示例1**:
```json
{
    "success": true,
    "message": "JSON文件解析成功",
    "data": {
        "nodes": [
            {
                "id": "1",
                "label": "节点1",
                "type": "entity"
            },
            {
                "id": "2",
                "label": "节点2",
                "type": "entity"
            }
        ],
        "edges": [
            {
                "source": "1",
                "target": "2",
                "relation": "相关"
            }
        ]
    }
}
```

**示例2**:
```json
{
    "success": false,
    "error": "JSON格式错误"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 4.2 解析CSV格式知识图谱文件
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/knowledge-graph/parse/csv`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| csvData | CSV数据 | Array | 是 | CSV格式的知识图谱数据 |
| fileName | 文件名 | String | 否 | 原始文件名 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| message | 响应消息 | String | 是 | 操作结果描述 |
| data | 解析结果 | Object | 否 | 解析后的知识图谱数据 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "message": "CSV文件解析成功",
    "data": {
        "nodes": [],
        "edges": []
    }
}
```

**示例1**:
```json
{
    "success": true,
    "message": "CSV文件解析成功",
    "data": {
        "nodes": [
            {
                "id": "1",
                "label": "节点1",
                "type": "entity"
            },
            {
                "id": "2",
                "label": "节点2",
                "type": "entity"
            }
        ],
        "edges": [
            {
                "source": "1",
                "target": "2",
                "relation": "相关"
            }
        ]
    }
}
```

**示例2**:
```json
{
    "success": false,
    "error": "CSV数据格式错误"
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 4.3 获取知识图谱统计信息
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/knowledge-graph/statistics`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| graphData | 图谱数据 | Object | 是 | 知识图谱数据对象 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| statistics | 统计信息 | Object | 否 | 包含节点数、边数等统计信息 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "statistics": {
        "nodeCount": 100,
        "edgeCount": 150,
        "maxDegree": 10,
        "avgDegree": 3.0
    }
}
```

**示例1**:
```json
{
    "success": true,
    "statistics": {
        "nodeCount": 100,
        "edgeCount": 150,
        "maxDegree": 10,
        "avgDegree": 3.0
    }
}
```

**说明**: 该返回字段由服务器返回给客户端

---

### 4.4 获取节点的邻居节点
- **提供方**: 服务器
- **接口请求方式**: POST
- **URL**: `/api/knowledge-graph/neighbors`
- **返回值**: JSON格式响应

#### 请求参数
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| graphData | 图谱数据 | Object | 是 | 知识图谱数据对象 |
| nodeId | 节点ID | String | 是 | 目标节点的ID |
| depth | 邻居深度 | Integer | 否 | 默认1，邻居节点的深度 |
| userId | 用户ID | Long | 是 | 当前用户ID |
| userType | 用户类型 | String | 是 | "user"或"admin" |

**说明**: 该请求参数是客户端向服务器请求

#### 返回字段说明
| 参数名称 | 描述 | 格式 | 是否必填 | 说明 |
|---------|------|------|----------|------|
| success | 操作是否成功 | Boolean | 是 | true/false |
| data | 邻居节点数据 | Object | 否 | 邻居节点和边的信息 |
| nodeId | 目标节点ID | String | 是 | 查询的节点ID |
| depth | 查询深度 | Integer | 是 | 使用的查询深度 |



**返回格式**: JSON
**返回内容**:
```json
{
    "success": true,
    "data": {
        "nodeId": "1",
        "neighbors": [],
        "depth": 1
    },
    "nodeId": "1",
    "depth": 1
}
```

**示例1**:
```json
{
    "success": true,
    "data": {
        "nodeId": "1",
        "neighbors": [
            {
                "id": "2",
                "label": "邻居节点1",
                "relation": "相关"
            },
            {
                "id": "3",
                "label": "邻居节点2",
                "relation": "相关"
            }
        ],
        "depth": 1
    },
    "nodeId": "1",
    "depth": 1
}
```

**说明**: 该返回字段由服务器返回给客户端

---

## 5. 通用错误响应格式

### 5.1 权限错误 (401 Unauthorized)
```json
{
    "error": "用户未登录"
}
```

### 5.2 权限不足 (403 Forbidden)
```json
{
    "error": "权限不足，无法执行此操作"
}
```

### 5.3 参数错误 (400 Bad Request)
```json
{
    "success": false,
    "error": "参数错误的具体描述"
}
```

### 5.4 服务器错误 (500 Internal Server Error)
```json
{
    "success": false,
    "error": "服务器内部错误的具体描述"
}
```

---

## 6. 接口调用说明

### 6.1 认证机制
- 大部分接口需要用户登录后才能访问
- 需要在请求参数中传递 `userId` 和 `userType`
- 管理员操作需要 `userType` 为 "admin"

### 6.2 数据源说明
- `dataSource` 参数用于指定操作的数据库
- 默认数据源为 "login"
- 用户可以操作多个数据源（需要相应权限）

### 6.3 分页说明
- 支持分页的接口通常包含 `page`、`size` 参数
- `page` 从1开始计数
- `size` 有最大限制，防止一次性获取过多数据

### 6.4 批量操作说明
- 批量插入操作有数据量限制（通常为10万条）
- 支持事务模式和非事务模式
- 提供多种导入策略（append、replace等）

---

## 7. 版本更新记录

**版本 1.0.0**
- 初始版本发布
- 包含用户认证、数据库管理、知识图谱三大模块
- 支持多数据源操作
- 提供完整的CRUD操作接口
